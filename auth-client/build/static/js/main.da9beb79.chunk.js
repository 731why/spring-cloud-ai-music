(this["webpackJsonpai-music-login-client"]=this["webpackJsonpai-music-login-client"]||[]).push([[0],{120:function(e,a,t){e.exports=t(264)},125:function(e,a,t){},126:function(e,a,t){},259:function(e,a,t){},260:function(e,a,t){},264:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(16),o=t.n(s),c=(t(125),t(114)),i=t(4),l=t(54),m=t(268),u=t(265),g=t(267),p=t(71),d=t(269),f=t(270),h=t(271),E=function(e){var a=new Headers;!1!==e.setContentType&&a.append("Content-Type","application/json"),localStorage.getItem("accessToken")&&a.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var t={headers:a};return e=Object.assign({},t,e),fetch(e.url,e).then((function(e){return e.json().then((function(a){return e.ok?a:Promise.reject(a)}))}))};t(126);var w=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),s=t[0],o=t[1];return r.a.createElement("div",{className:"login-container"},r.a.createElement(d.a,{style:{fontSize:50}}),r.a.createElement(u.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){var a;o(!0),(a=e,E({url:"/api/user/signin",method:"POST",body:JSON.stringify(a)})).then((function(e){localStorage.setItem("accessToken",e.accessToken),window.location.href="/",o(!1)})).catch((function(e){401===e.status?m.a.error({message:"Error",description:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5!"}):m.a.error({message:"Error",description:e.message||"\u62b1\u6b49! \u767b\u5f55\u9519\u8bef. \u8bf7\u7a0d\u540e\u91cd\u8bd5!"}),o(!1)}))}},r.a.createElement(u.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]},r.a.createElement(g.a,{size:"large",prefix:r.a.createElement(f.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(u.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]},r.a.createElement(g.a,{size:"large",prefix:r.a.createElement(h.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})),r.a.createElement(u.a.Item,null,r.a.createElement(p.a,{shape:"round",size:"large",htmlType:"submit",className:"login-form-button",loading:s},"\u767b\u5f55")),"\u672a\u6ce8\u518c? ",r.a.createElement("a",{href:"/signup"},"\u6ce8\u518c")))},b=(t(259),function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),s=t[0],o=t[1];Object(n.useEffect)((function(){null!==localStorage.getItem("accessToken")&&(window.location.href="/")}),[]);return r.a.createElement("div",{className:"login-container"},r.a.createElement(d.a,{style:{fontSize:50}}),r.a.createElement(u.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(a){var t;o(!0),(t=a,E({url:"/api/user/signup",method:"POST",body:JSON.stringify(t)})).then((function(a){m.a.success({message:"Success",description:"\u611f\u8c22\u4f7f\u7528! \u60a8\u5df2\u6210\u529f\u6ce8\u518c. \u8bf7\u767b\u5f55\u4f7f\u7528!"}),e.history.push("/signin"),o(!1)})).catch((function(e){m.a.error({message:"Error",description:e.message||"\u62b1\u6b49! \u6ce8\u518c\u9519\u8bef. \u8bf7\u7a0d\u540e\u91cd\u8bd5!"}),o(!1)}))}},r.a.createElement(u.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]},r.a.createElement(g.a,{size:"large",placeholder:"\u7528\u6237\u540d"})),r.a.createElement(u.a.Item,{name:"email",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1!"}]},r.a.createElement(g.a,{size:"large",placeholder:"\u90ae\u7bb1"})),r.a.createElement(u.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]},r.a.createElement(g.a,{size:"large",type:"password",placeholder:"\u5bc6\u7801"})),r.a.createElement(u.a.Item,null,r.a.createElement(p.a,{shape:"round",size:"large",htmlType:"submit",className:"login-form-button",loading:s},"\u6ce8\u518c")),"\u5df2\u6ce8\u518c? ",r.a.createElement("a",{href:"/signin"},"\u767b\u5f55")))}),v=(t(260),function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(c.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(w,e)}}),r.a.createElement(i.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(b,e)}}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[120,1,2]]]);
//# sourceMappingURL=main.da9beb79.chunk.js.map